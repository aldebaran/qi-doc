Network Binary Protocol
=======================

Basic Types
-----------

+--------------+-------------+------------------------------------------------------------------------+
| Type         |   Size      | Description                                                            |
+==============+=============+========================================================================+
| void         | 0           | void                                                                   |
+--------------+-------------+------------------------------------------------------------------------+
| bool         | 1           | boolean                                                                |
+--------------+-------------+------------------------------------------------------------------------+
| int8_t       | 1           | signed byte                                                            |
+--------------+-------------+------------------------------------------------------------------------+
| int16_t      | 2           | signed 16-bit integer                                                  |
+--------------+-------------+------------------------------------------------------------------------+
| int32_t      | 4           | signed 32-bit integer                                                  |
+--------------+-------------+------------------------------------------------------------------------+
| int64_t      | 8           | signed 64-bit integer                                                  |
+--------------+-------------+------------------------------------------------------------------------+
| uint8_t      | 1           | unsigned byte                                                          |
+--------------+-------------+------------------------------------------------------------------------+
| uint16_t     | 2           | unsigned 16-bit integer                                                |
+--------------+-------------+------------------------------------------------------------------------+
| uint32_t     | 4           | unsigned 32-bit integer                                                |
+--------------+-------------+------------------------------------------------------------------------+
| uint64_t     | 8           | unsigned 64-bit integer                                                |
+--------------+-------------+------------------------------------------------------------------------+
| float        | 4           | 32-bit floating point number                                           |
+--------------+-------------+------------------------------------------------------------------------+
| double       | 8           | 64-bit floating point number                                           |
+--------------+-------------+------------------------------------------------------------------------+
| const char * | 4 + n       | - uint32_t - length                                                    |
|              |             | - const char * - data (including \0)                                   |
+--------------+-------------+------------------------------------------------------------------------+


STL
---

+---------------+--------------------------------+----------------------------------------------------------------+
| Type          | Size                           | Description                                                    |
+===============+================================+================================================================+
|std::string    | 4 + n                          | - uint32_t - length                                            |
|               |                                | - const char * - data                                          |
+---------------+--------------------------------+----------------------------------------------------------------+
|std::list<T>   | 4 + n * size(T)                | - uint32_t - length                                            |
|               |                                | - [ T0 ] .. [ Tlength ]                                        |
+---------------+--------------------------------+----------------------------------------------------------------+
|std::vector<T> | 4 + n * size(T)                | - uint32_t - length                                            |
|               |                                | - [ T0 ] .. [ Tlength ]                                        |
+---------------+--------------------------------+----------------------------------------------------------------+
|std::map<K, V> | 4 + n * (size(K) + size(V))    | - uint32_t - length                                            |
|               |                                | - [ K0 ] [V0] .. [ Klength ] [ Vlength ]                       |
+---------------+--------------------------------+----------------------------------------------------------------+


Network Message
---------------

There are 3 messages types:

- request
- response
- event


An id is used to identify messages.

Messages have the following structure:

  [uint32_t type + id] [ uint32_t size] [ message ]

type could be:

 0. req
 1. rep
 2. event

The id is generated for the req and event message type, for the rep message type the id is the same as the req it answer to.


Req Message
-----------

Structure:

  [ 0x0 id ] [ size ] [ message ]

A request is send to a service which could (or not) answer to that request. The response will have the same id as the answer.
The id is generated by the client which ask for an answer.

Rep Message
-----------

Structure:

  [ 0x1 id ] [ size ] [ message ]



Event Message
-------------

Structure:

  [ 0x2 id ] [ size ] [ message ]

